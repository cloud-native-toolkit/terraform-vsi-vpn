id: github.com/cloud-native-toolkit/terraform-vsi-vpn
name: vsi-vpn
type: terraform
description: Module to provision OpenVPN into a Virtual Private Cloud Virtual Server Instance
tags:
  - infrastructure
  - network
  - vpc
  - vpn
versions:
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
      - id: cos_bucket
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-object-storage-bucket
            version: ">= 0.0.1"
        optional: true
      - id: kms_key
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-kms-key
            version: ">= 0.0.1"
        optional: true
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-3
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
      - name: flow_log_cos_bucket_name
        moduleRef:
          id: cos_bucket
          output: bucket_name
        optional: true
        type: string
        description: Cloud Object Storage bucket id for flow logs (optional)
        default: ""
      - name: kms_key_crn
        moduleRef:
          id: kms_key
          output: crn
        optional: true
        type: string
        description: The crn of the root key in the kms instance. Required if kms_enabled is true
        default: ""
      - name: kms_enabled
        type: bool
        description: Flag indicating that the volumes should be encrypted using a KMS.
        default: false
        optional: true
      - name: allow_deprecated_image
        type: bool
        description: Flag indicating that deprecated images should be allowed for use in the Virtual Server instance. If the value is `false` and the image is deprecated then the module will fail to provision
        default: true
        optional: true
    version: v1.2.4
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: names
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_id
        description: The id of the security group that was created
      - name: security_group
        description: The security group that was created
      - name: maintenance_security_group_id
        description: The id of the security group that was created
      - name: maintenance_security_group
        description: The security group that was created
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
      - id: cos_bucket
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-object-storage-bucket
            version: ">= 0.0.1"
        optional: true
      - id: kms_key
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-kms-key
            version: ">= 0.0.1"
        optional: true
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-3
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
      - name: flow_log_cos_bucket_name
        moduleRef:
          id: cos_bucket
          output: bucket_name
        optional: true
        type: string
        description: Cloud Object Storage bucket id for flow logs (optional)
        default: ""
      - name: kms_key_crn
        moduleRef:
          id: kms_key
          output: crn
        optional: true
        type: string
        description: The crn of the root key in the kms instance. Required if kms_enabled is true
        default: ""
      - name: kms_enabled
        type: bool
        description: Flag indicating that the volumes should be encrypted using a KMS.
        default: false
        optional: true
      - name: allow_deprecated_image
        type: bool
        description: Flag indicating that deprecated images should be allowed for use in the Virtual Server instance. If the value is `false` and the image is deprecated then the module will fail to provision
        default: true
        optional: true
    version: v1.2.3
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_id
        description: The id of the security group that was created
      - name: security_group
        description: The security group that was created
      - name: maintenance_security_group_id
        description: The id of the security group that was created
      - name: maintenance_security_group
        description: The security group that was created
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
      - id: cos_bucket
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-object-storage-bucket
            version: ">= 0.0.1"
        optional: true
      - id: kms_key
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-kms-key
            version: ">= 0.0.1"
        optional: true
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-3
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
      - name: flow_log_cos_bucket_name
        moduleRef:
          id: cos_bucket
          output: bucket_name
        optional: true
        type: string
        description: Cloud Object Storage bucket id for flow logs (optional)
        default: ""
      - name: kms_key_crn
        moduleRef:
          id: kms_key
          output: crn
        optional: true
        type: string
        description: The crn of the root key in the kms instance. Required if kms_enabled is true
        default: ""
      - name: kms_enabled
        type: bool
        description: Flag indicating that the volumes should be encrypted using a KMS.
        default: false
        optional: true
    version: v1.2.2
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_id
        description: The id of the security group that was created
      - name: security_group
        description: The security group that was created
      - name: maintenance_security_group_id
        description: The id of the security group that was created
      - name: maintenance_security_group
        description: The security group that was created
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
      - id: cos_bucket
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-object-storage-bucket
            version: ">= 0.0.1"
        optional: true
      - id: kms_key
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-kms-key
            version: ">= 0.0.1"
        optional: true
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
      - name: flow_log_cos_bucket_name
        moduleRef:
          id: cos_bucket
          output: bucket_name
        optional: true
        type: string
        description: Cloud Object Storage bucket id for flow logs (optional)
        default: ""
      - name: kms_key_crn
        moduleRef:
          id: kms_key
          output: crn
        optional: true
        type: string
        description: The crn of the root key in the kms instance. Required if kms_enabled is true
        default: ""
      - name: kms_enabled
        type: bool
        description: Flag indicating that the volumes should be encrypted using a KMS.
        default: false
        optional: true
    version: v1.2.1
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_id
        description: The id of the security group that was created
      - name: security_group
        description: The security group that was created
      - name: maintenance_security_group_id
        description: The id of the security group that was created
      - name: maintenance_security_group
        description: The security group that was created
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
      - name: flow_log_cos_bucket_name
        type: string
        description: Cloud Object Storage bucket id for flow logs (optional)
        default: ""
        optional: true
      - name: kms_enabled
        type: bool
        description: Flag indicating that the volumes should be encrypted using a KMS.
        default: false
        optional: true
      - name: kms_key_crn
        type: string
        description: The crn of the root key in the kms instance. Required if kms_enabled is true
        default: ""
        optional: true
    version: v1.2.0
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_id
        description: The id of the security group that was created
      - name: security_group
        description: The security group that was created
      - name: maintenance_security_group_id
        description: The id of the security group that was created
      - name: maintenance_security_group
        description: The security group that was created
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.1.0
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.7
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: subnet_count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: instance_network_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.6
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: subnet_count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: instance_network_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.5
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: subnet_count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: instance_network_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.4
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: subnet_count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: instance_network_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.3
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: network_interface_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.2
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
      - id: subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets
            version: ">= 1.0.0"
      - id: vpcssh
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc-ssh
            version: ">= 1.0.0"
      - id: bastion
        refs:
          - source: github.com/cloud-native-toolkit/terraform-vsi-bastion
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: subnets
          output: subnet_count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: subnets
        moduleRef:
          id: subnets
          output: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        moduleRef:
          id: vpcssh
          output: id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        moduleRef:
          id: vpcssh
          output: private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: instance_count
        moduleRef:
          id: bastion
          output: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        moduleRef:
          id: bastion
          output: instance_network_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: image_name
        scope: ignore
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        scope: ignore
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        scope: ignore
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        scope: ignore
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
    version: v1.0.1
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
    variables:
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the existing VPC instance where the OpenVPN instance(s) will be provisioned.
      - name: subnet_count
        moduleRef:
          id: vpc
          output: subnet_count
        type: number
        description: The number of subnets on the vpc instance that will be used for the OpenVPN instance(s)
      - name: resource_group_name
        scope: global
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the resources will be provisioned.
      - name: name_prefix
        scope: global
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: tags
        scope: module
        type: list(string)
        description: The list of tags that will be applied to the OpenVPN vsi instances.
        default: []
        optional: true
      - name: openvpn_server_network
        scope: ignore
      - name: resource_group_id
        type: string
        description: The id of the IBM Cloud resource group where the resources will be provisioned.
      - name: subnets
        type: list(object({id = string, zone = string, label = string}))
        description: The list of subnet objects where OpenVPN servers will be provisioned
      - name: ssh_key_id
        type: string
        description: The id of a key registered with the VPC
      - name: ssh_private_key
        type: string
        description: The private key that is paired with ssh_key_id
      - name: image_name
        type: string
        description: Name of the image to use for the OpenVPN instance
        default: ibm-centos-7-9-minimal-amd64-2
        optional: true
      - name: profile_name
        type: string
        description: Virtual Server Instance profile to use for the OpenVPN instance
        default: cx2-2x4
        optional: true
      - name: allow_ssh_from
        type: string
        description: An IP address, a CIDR block, or a single security group identifier to allow incoming SSH connection to the OpenVPN instance
        default: 0.0.0.0/0
        optional: true
      - name: security_group_rules
        type: |-
          list(object({
          //    name=string,
          //    direction=string,
          //    remote=optional(string),
          //    ip_version=optional(string),
          //    tcp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    udp=optional(object({
          //      port_min=number,
          //      port_max=number
          //    })),
          //    icmp=optional(object({
          //
        description: List of security group rules to set on the OpenVPN security group in addition to inbound SSH and VPC and outbound DNS, ICMP, and HTTP(s) rules
        default: []
        optional: true
      - name: instance_count
        type: number
        description: The number of Bastion/jump box instances routable by the OpenVPN server.
      - name: instance_network_ids
        type: list(string)
        description: The list of network interface ids for the Bastion/jump box servers.
    version: v1.0.0
    outputs:
      - name: ids
        description: ID of the OpenVPN virtual server instance
      - name: count
        description: ID of the OpenVPN virtual server instance
      - name: private_ips
        description: Private IP address of the OpenVPN virtual server instance
      - name: public_ips
        description: Public IP address of the OpenVPN virtual server instance
      - name: security_group_ids
        description: ID of the security group assigned to the OpenVPN interface
      - name: maintenance_security_group_ids
        description: ID of the security group used to allow connection from OpenVPN to your bastion instances
  - platforms: []
    dependencies:
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
    variables:
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
      - name: subnet_count
        moduleRef:
          id: vpc
          output: subnet_count
        type: string
      - name: resource_group_name
        scope: global
        type: string
      - name: region
        scope: global
        type: string
      - name: name_prefix
        scope: global
        type: string
      - name: ibmcloud_api_key
        scope: global
        type: string
      - name: tags
        scope: module
        type: string
      - name: openvpn_server_network
        scope: ignore
        type: string
    version: v0.0.1
    outputs:
      - name: output vpc_name {   value = data.ibm_is_vpc.vpc.name }
        description: output vpc_name {   value = data.ibm_is_vpc.vpc.name }
      - name: output bastion_ip {   value = module.bastion.bastion_public_ip }
        description: output bastion_ip {   value = module.bastion.bastion_public_ip }
      - name: output bastion_private_ip {   value = module.bastion.bastion_private_ip }
        description: output bastion_private_ip {   value = module.bastion.bastion_private_ip }
      - name: 'output instance_ips {   value = [     for instance in local.instances : instance.primary_network_interface.0.primary_ipv4_address   ] }'
        description: 'output instance_ips {   value = [     for instance in local.instances : instance.primary_network_interface.0.primary_ipv4_address   ] }'
  - platforms:
      - kubernetes
      - ocp3
      - ocp4
    dependencies: []
    #    - id: cluster
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-ibm-container-platform
    #          version: ">= 1.7.0"
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-ocp-cluster
    #          version: ">= 2.0.0"
    #    - id: namespace
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-namespace
    #          version: ">= 2.1.0"
    #    - id: dashboard
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-dashboard
    #          version: ">= 1.6.0"
    variables: []
    version: v0.0.0
